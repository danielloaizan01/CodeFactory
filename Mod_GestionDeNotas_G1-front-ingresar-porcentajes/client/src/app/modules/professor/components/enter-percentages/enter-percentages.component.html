<div class="card card-percentages m-auto mt-4">
  <div
    class="card-header d-flex justify-content-between align-items-center card--header"
  >
    <h3 class="mb-0 fs-6 text-white">Ingresar porcentajes</h3>

  </div>
  <div class="card-body">
    <div class="row text-center mb-2">
      <div class="col-1"></div>
      <div class="col">
        <h4 class="fs-6">Actividad Evaluativa</h4>
      </div>
      <div class="col-4">
        <h4 class="fs-6">Porcentaje</h4>
      </div>
      <div class="col-1"></div>
    </div>


    <div *ngIf="!activities.length">
      <div class="alert alert-warning" role="alert">
        No se han agregado actividades.
      </div>
    </div>

    <div class="row" *ngFor="let act of activities; index as i">
      <div class="col-1">
        <p>{{ i + 1 }}</p>
      </div>
      <div class="col">
        <input
          type="text"
          name="name"
          value="{{ act?.name }}"
          class="form-control form-control-sm"
          [(ngModel)]="activities[i].name"
          (ngModelChange)="updatePercentage()"
        />
      </div>
      <div class="col-4">
        <input
          type="number"
          name="percentage"
          id=""
          value="{{ act?.percentage }}"
          class="form-control form-control-sm"
          [(ngModel)]="activities[i].percentage"
          (ngModelChange)="updatePercentage()"
        />
      </div>
      <div class="col-1 p-0">
        <button class="btn-close-field" (click)="deleteActivity(i)">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </div>
    </div>


    <div class="row">
      <div class="col-1"></div>
      <div class="col">
        <button class="btn btn-link p-1" (click)="addActivity()">
          + Agregar campo
        </button>
      </div>
      <div class="col-4 d-flex align-items-center">
        <p class="mb-0 fw-bold">
          Total: <span class="fw-normal">{{ fullPercentage }}</span
          >%
        </p>
      </div>
      <div class="col-1"></div>
    </div>

    <div class="row mt-2">
      <div class="col d-flex justify-content-center gap-3">
        <button class="btn btn-danger">Cancelar</button>
        <button class="btn btn-success">Guardar</button>
      </div>
    </div>
  </div>
</div>
